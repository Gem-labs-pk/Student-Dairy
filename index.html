<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <title>To Be. | Gem Labs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --focus: #f59e0b;
        }

        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none; /* Prevents text selection for native feel */
            overscroll-behavior-y: contain;
        }

        input, textarea { -webkit-user-select: text; user-select: text; }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            border-radius: 1.5rem;
        }

        .dark .glass-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-active { color: var(--primary); font-weight: 800; }
        
        /* App Navigation Animations */
        .page-transition { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100">

    <div id="app" class="min-h-screen flex flex-col max-w-md mx-auto shadow-xl relative overflow-hidden">
        
        <header class="p-6 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-800 tracking-tighter">To <span class="text-indigo-600">Be.</span></h1>
                <p class="text-[10px] font-bold text-slate-400 tracking-widest uppercase">Gem Labs Productivity</p>
            </div>
            <div class="flex gap-2">
                <button id="auth-btn" onclick="router.navigate('auth')" class="p-2 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700">
                    <i data-lucide="user" class="w-5 h-5"></i>
                </button>
            </div>
        </header>

        <main id="main-view" class="px-6 flex-grow pb-32">
            </main>

        <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50">
            <div class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border border-slate-200 dark:border-slate-800 p-2 rounded-3xl shadow-2xl flex justify-around">
                <button onclick="router.navigate('timetable')" class="p-3 rounded-2xl flex flex-col items-center gap-1">
                    <i data-lucide="calendar" class="w-5 h-5"></i>
                    <span class="text-[10px]">Time</span>
                </button>
                <button onclick="router.navigate('tasks')" class="p-3 rounded-2xl flex flex-col items-center gap-1">
                    <i data-lucide="check-square" class="w-5 h-5"></i>
                    <span class="text-[10px]">Tasks</span>
                </button>
                <button onclick="router.navigate('focus')" class="p-3 rounded-2xl flex flex-col items-center gap-1">
                    <i data-lucide="zap" class="w-5 h-5 text-amber-500"></i>
                    <span class="text-[10px]">Focus</span>
                </button>
                <button onclick="router.navigate('sleep')" class="p-3 rounded-2xl flex flex-col items-center gap-1">
                    <i data-lucide="moon" class="w-5 h-5"></i>
                    <span class="text-[10px]">Sleep</span>
                </button>
            </div>
        </nav>
    </div>

    <script>
        // --- State ---
        const state = {
            tasks: JSON.parse(localStorage.getItem('tb_tasks')) || [],
            timetable: JSON.parse(localStorage.getItem('tb_time')) || { slots: [] },
            user: JSON.parse(localStorage.getItem('tb_user')) || null,
            history: ['timetable']
        };

        const router = {
            navigate: (view, pushToHistory = true) => {
                if (pushToHistory) state.history.push(view);
                renderView(view);
            },
            back: () => {
                if (state.history.length > 1) {
                    state.history.pop();
                    const lastView = state.history[state.history.length - 1];
                    renderView(lastView);
                }
            }
        };

        // --- View Controller ---
        function renderView(view) {
            const container = document.getElementById('main-view');
            
            const views = {
                timetable: `
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">Daily Timetable</h2>
                        <button class="text-xs bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full font-bold">Edit Day</button>
                    </div>
                    <div class="space-y-3">
                        <div class="glass-card p-4 flex justify-between border-l-4 border-l-emerald-500">
                            <span>08:00 - 10:00</span> <span class="font-bold">Free Time</span>
                        </div>
                        <div class="glass-card p-4 flex justify-between border-l-4 border-l-indigo-500">
                            <span>10:00 - 14:00</span> <span class="font-bold">Core Work (Busy)</span>
                        </div>
                    </div>
                `,
                tasks: `
                    <h2 class="text-xl font-bold mb-6">To-Do List</h2>
                    <div class="glass-card p-4 mb-4">
                        <input type="text" placeholder="Add assignment..." class="w-full bg-transparent outline-none">
                    </div>
                    <div class="opacity-40 text-center py-10">No pending assignments.</div>
                `,
                focus: `
                    <div class="text-center py-12">
                        <div class="w-48 h-48 border-8 border-amber-500 rounded-full mx-auto flex items-center justify-center mb-8">
                            <span class="text-4xl font-black">25:00</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Pomodoro Session</h3>
                        <button class="bg-amber-500 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-amber-500/30">Start Focusing</button>
                    </div>
                `,
                sleep: `
                    <h2 class="text-xl font-bold mb-6">Sleep Tracker</h2>
                    <div class="glass-card p-6 text-center">
                        <p class="text-slate-400 text-sm mb-4">Tracking your rest cycles</p>
                        <i data-lucide="moon" class="w-12 h-12 mx-auto text-indigo-400 mb-4"></i>
                        <button class="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold">Log Sleep</button>
                    </div>
                `,
                auth: `
                    <h2 class="text-xl font-bold mb-6">Join Gem Labs</h2>
                    <div class="space-y-4">
                        <input type="email" placeholder="Email" class="glass-card w-full p-4 outline-none">
                        <input type="password" placeholder="Password" class="glass-card w-full p-4 outline-none">
                        <button class="w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold">Sign In / Up</button>
                    </div>
                `
            };

            container.innerHTML = views[view] || views.timetable;
            lucide.createIcons();
        }

        // Native Back Button Handling
        window.addEventListener('popstate', (e) => {
            e.preventDefault();
            router.back();
        });

        // Init
        window.history.pushState({view: 'timetable'}, "");
        renderView('timetable');
    </script>
</body>
</html>
